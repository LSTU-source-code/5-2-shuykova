import pandas as pd
import numpy as np
from scipy import stats
import seaborn as sns
import matplotlib.pyplot as plt

# Искусственное создание данных (замените на реальные данные)
data = {
    'X': [
        'было все равно, что изучать',
        'записался по рекомендации учителя',
        'записался за компанию с друзьями',
        'записался по рекомендации друзей',
        'записался по рекомендации родителей',
        'записался по собственному желанию'
    ] * 50,
    'Y': np.random.randint(0, 6, size=300)  # Оценки от 0 до 5
}

df = pd.DataFrame(data)

# Вывод первых строк DataFrame
print(df.head())

# 1. Анализ средних значений Y для каждой категории X
mean_analysis = df.groupby('X')['Y'].mean().reset_index()
print("\nСредние значения Y по категориям X:")
print(mean_analysis)

# 2. Визуализация распределения Y по категориям X
plt.figure(figsize=(10, 6))
sns.boxplot(x='X', y='Y', data=df)
plt.title('Распределение оценок Y по причинам выбора программы X')
plt.xticks(rotation=45)
plt.show()

# 3. Проверка статистической значимости различий между группами
# Если нужно сравнить две группы, используем t-тест
# Если больше двух групп, используем ANOVA

# Пример: Сравнение двух групп (например, "было все равно" и "по рекомендации учителя")
group1 = df[df['X'] == 'было все равно, что изучать']['Y']
group2 = df[df['X'] == 'записался по рекомендации учителя']['Y']

t_stat, p_value = stats.ttest_ind(group1, group2, equal_var=False)
print(f"\nT-тест между двумя группами:")
print(f"T-статистика: {t_stat}")
print(f"P-значение: {p_value}")

# Если нужно сравнить все группы, используем ANOVA
f_stat, p_value_anova = stats.f_oneway(
    df[df['X'] == 'было все равно, что изучать']['Y'],
    df[df['X'] == 'записался по рекомендации учителя']['Y'],
    df[df['X'] == 'записался за компанию с друзьями']['Y'],
    df[df['X'] == 'записался по рекомендации друзей']['Y'],
    df[df['X'] == 'записался по рекомендации родителей']['Y'],
    df[df['X'] == 'записался по собственному желанию']['Y']
)
print("\nANOVA для всех групп:")
print(f"F-статистика: {f_stat}")
print(f"P-значение: {p_value_anova}")

# Интерпретация результатов:
# Если P < 0.05, то различия между группами статистически значимы